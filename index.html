<!DOCTYPE html>

<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

  <!-- PWAé…ç½® -->

  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="è§†åŠ›è®­ç»ƒ">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="theme-color" content="#3b82f6">

  <!-- Manifesté“¾æ¥ -->

  <link rel="manifest" href="/manifest.json">

  <!-- å›¾æ ‡ -->

  <link rel="apple-touch-icon" href="/icon-192.png">
  <link rel="icon" type="image/png" href="/icon-192.png">

  <title>è§†åŠ›è®­ç»ƒ</title>

  <!-- Reactåº“ -->

  <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>

  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <!-- Tailwind CSS -->

  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    * {
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
    }
    
    body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    }
    
    #root {
      width: 100vw;
      height: 100vh;
      overflow: hidden;
    }
    
    /* æ»‘å—æ ·å¼ */
    input[type="range"] {
      -webkit-appearance: none;
      appearance: none;
      background: linear-gradient(to right, #60a5fa, #3b82f6);
      cursor: pointer;
      height: 10px;
      border-radius: 5px;
      border: 2px solid rgba(255, 255, 255, 0.4);
      box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.3);
    }
    
    input[type="range"]::-webkit-slider-track {
      background: transparent;
      height: 10px;
      border-radius: 5px;
    }
    
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      appearance: none;
      background: white;
      height: 24px;
      width: 24px;
      border-radius: 50%;
      border: 3px solid #3b82f6;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.6);
      cursor: pointer;
    }
    
    input[type="range"]::-moz-range-track {
      background: linear-gradient(to right, #60a5fa, #3b82f6);
      height: 10px;
      border-radius: 5px;
      border: 2px solid rgba(255, 255, 255, 0.4);
    }
    
    input[type="range"]::-moz-range-thumb {
      background: white;
      height: 24px;
      width: 24px;
      border-radius: 50%;
      border: 3px solid #3b82f6;
      box-shadow: 0 3px 10px rgba(0, 0, 0, 0.6);
      cursor: pointer;
    }
    
    /* è§†é¢‘æ ·å¼ */
    video {
      max-width: 100%;
      border-radius: 12px;
      background: #000;
    }
  </style>

</head>
<body>
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useEffect, useRef } = React;

    function VisionTrainingApp() {
      // çŠ¶æ€ç®¡ç†
      const [mode, setMode] = useState('ball');
      const [isTraining, setIsTraining] = useState(false);
      const [showSettings, setShowSettings] = useState(false);
      const [showVideoModal, setShowVideoModal] = useState(false);
      const [showCompletionModal, setShowCompletionModal] = useState(false);
      
      const [elapsedTime, setElapsedTime] = useState(0);
      const [currentNumber, setCurrentNumber] = useState(42);
      const [depth, setDepth] = useState(50);
      const [isMovingNear, setIsMovingNear] = useState(true);
      const [isPaused, setIsPaused] = useState(false);
      const [eRotation, setERotation] = useState(0);
      const [uploadedImage, setUploadedImage] = useState(null);
      const [videoError, setVideoError] = useState(false);

      const [settings, setSettings] = useState({
        speed: 3.0,
        pauseNear: 1,
        pauseFar: 1.5,
        ballColor: '#4CAF50',
        trainingDuration: 10,
        nearSize: 200,
        farSize: 5
      });

      const numberScale = 0.65;
      const animationRef = useRef(null);
      const videoRef = useRef(null);

      // è®­ç»ƒè®¡æ—¶å™¨
      useEffect(() => {
        let interval;
        if (isTraining) {
          interval = setInterval(() => {
            setElapsedTime(t => {
              const newTime = t + 1;
              const totalSeconds = settings.trainingDuration * 60;
              if (newTime >= totalSeconds) {
                setIsTraining(false);
                setShowCompletionModal(true);
                return 0;
              }
              return newTime;
            });
          }, 1000);
        } else {
          setElapsedTime(0);
        }
        return () => {
          if (interval) clearInterval(interval);
        };
      }, [isTraining, settings.trainingDuration]);

      // åŠ¨ç”»å¾ªç¯
      useEffect(() => {
        if (!isTraining) {
          if (animationRef.current) {
            cancelAnimationFrame(animationRef.current);
          }
          return;
        }

        const animate = () => {
          if (isPaused) {
            animationRef.current = requestAnimationFrame(animate);
            return;
          }

          setDepth(prevDepth => {
            const minDepth = 0;
            const maxDepth = 100;
            const speed = settings.speed * 0.5;
            let newDepth = isMovingNear ? prevDepth + speed : prevDepth - speed;

            if (newDepth >= maxDepth) {
              newDepth = maxDepth;
              setIsMovingNear(false);
              setCurrentNumber(Math.floor(Math.random() * 90) + 10);
              const rotations = [0, 45, 90, 135, 180, 225, 270, 315];
              setERotation(rotations[Math.floor(Math.random() * 8)]);
              setIsPaused(true);
              setTimeout(() => setIsPaused(false), settings.pauseNear * 1000);
            } else if (newDepth <= minDepth) {
              newDepth = minDepth;
              setIsMovingNear(true);
              setCurrentNumber(Math.floor(Math.random() * 90) + 10);
              const rotations = [0, 45, 90, 135, 180, 225, 270, 315];
              setERotation(rotations[Math.floor(Math.random() * 8)]);
              setIsPaused(true);
              setTimeout(() => setIsPaused(false), settings.pauseFar * 1000);
            }
            return newDepth;
          });

          animationRef.current = requestAnimationFrame(animate);
        };

        animationRef.current = requestAnimationFrame(animate);
        return () => {
          if (animationRef.current) {
            cancelAnimationFrame(animationRef.current);
          }
        };
      }, [isTraining, settings, isMovingNear, isPaused]);

      // å›¾ç‰‡ä¸Šä¼ å¤„ç†
      const handleImageUpload = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (event) => {
            const img = new Image();
            img.onload = () => {
              const canvas = document.createElement('canvas');
              const size = Math.min(img.width, img.height);
              canvas.width = size;
              canvas.height = size;
              const ctx = canvas.getContext('2d');
              const startX = (img.width - size) / 2;
              const startY = (img.height - size) / 2;
              ctx.drawImage(img, startX, startY, size, size, 0, 0, size, size);
              setUploadedImage(canvas.toDataURL('image/jpeg', 0.9));
            };
            img.src = event.target.result;
          };
          reader.readAsDataURL(file);
        }
      };

      // è§†é¢‘é”™è¯¯å¤„ç†
      const handleVideoError = () => {
        setVideoError(true);
      };

      // è®¡ç®—å½“å‰å­—ä½“å¤§å°
      const currentFontSize = (settings.farSize || 5) + ((settings.nearSize || 200) - (settings.farSize || 5)) * (depth / 100);
      const ballSize = currentFontSize / numberScale;
      const numberColor = (settings.ballColor === '#FFFFFF' || settings.ballColor === '#FFEB3B') ? '#000000' : '#FFFFFF';

      return (
        <div className="min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 flex flex-col" style={{height: '100vh', width: '100vw'}}>
          {/* é¡¶éƒ¨å¯¼èˆªæ  */}
          <div className="bg-white/10 backdrop-blur-md p-4 flex justify-between items-center border-b border-white/20">
            <h1 className="text-xl md:text-2xl font-bold text-white">ğŸ‘ï¸ è§†åŠ›è®­ç»ƒ</h1>
            <button onClick={() => setShowSettings(!showSettings)} className="p-2 rounded-xl bg-white/10 hover:bg-white/20 transition-colors">
              <svg className="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z" />
                <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>
            </button>
          </div>

          {/* è®­ç»ƒåŒºåŸŸ */}
          <div className="flex-1 flex items-center justify-center relative overflow-hidden" style={{background: 'linear-gradient(135deg, rgba(255,255,255,0.05) 0%, rgba(255,255,255,0.02) 100%)'}}>
            <div className="absolute inset-0 flex items-center justify-center" style={{perspective: '2000px'}}>
              {mode === 'ball' ? (
                <div style={{opacity: 0.9, transition: isPaused ? 'none' : 'all 0.05s linear'}}>
                  <div className="rounded-full shadow-2xl flex items-center justify-center" style={{
                    backgroundColor: settings.ballColor,
                    width: `${ballSize}px`,
                    height: `${ballSize}px`,
                    boxShadow: `0 ${ballSize * 0.1}px ${ballSize * 0.3}px rgba(0,0,0,0.3)`
                  }}>
                    <span className="font-bold select-none" style={{
                      fontSize: `${currentFontSize}px`,
                      lineHeight: '1',
                      color: numberColor
                    }}>{currentNumber}</span>
                  </div>
                </div>
              ) : (
                <div style={{opacity: 0.9, transition: isPaused ? 'none' : 'all 0.05s linear'}}>
                  {uploadedImage ? (
                    <img src={uploadedImage} alt="è®­ç»ƒå›¾ç‰‡" className="rounded-2xl" style={{
                      width: `${ballSize}px`,
                      height: `${ballSize}px`,
                      objectFit: 'contain'
                    }} />
                  ) : (
                    <div className="bg-white rounded-2xl flex items-center justify-center" style={{
                      width: `${ballSize}px`,
                      height: `${ballSize}px`
                    }}>
                      <div style={{
                        transform: `rotate(${eRotation}deg)`,
                        transition: 'transform 0.3s',
                        width: `${currentFontSize}px`,
                        height: `${currentFontSize}px`
                      }}>
                        <svg width="100%" height="100%" viewBox="0 0 100 100">
                          <rect x="0" y="0" width="100" height="20" fill="black"/>
                          <rect x="0" y="40" width="60" height="20" fill="black"/>
                          <rect x="0" y="80" width="100" height="20" fill="black"/>
                        </svg>
                      </div>
                    </div>
                  )}
                </div>
              )}
            </div>
          </div>

          {/* åº•éƒ¨æ§åˆ¶æ  */}
          <div className="bg-white/10 backdrop-blur-md p-4 md:p-6 border-t border-white/20">
            <div className="max-w-3xl mx-auto flex gap-3 md:gap-4 items-center justify-center flex-wrap">
              <button 
                onClick={() => { setMode('ball'); if (isTraining) setIsTraining(false); }}
                className={`px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold transition-all shadow-lg text-sm md:text-base ${
                  mode === 'ball' ? 'bg-gradient-to-r from-blue-500 to-indigo-600 text-white' : 'bg-white/10 text-white hover:bg-white/20'
                }`}>
                æ•°å­—å°çƒ
              </button>
              <button 
                onClick={() => { setMode('image'); if (isTraining) setIsTraining(false); }}
                className={`px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold transition-all shadow-lg text-sm md:text-base ${
                  mode === 'image' ? 'bg-gradient-to-r from-blue-500 to-indigo-600 text-white' : 'bg-white/10 text-white hover:bg-white/20'
                }`}>
                è§†åŠ›è¡¨Eå­—
              </button>
              <button 
                onClick={() => { setShowVideoModal(true); setVideoError(false); }}
                className="px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold transition-all shadow-lg text-sm md:text-base bg-white/10 text-white hover:bg-white/20">
                è®­ç»ƒè§†é¢‘
              </button>
              <button 
                onClick={() => setIsTraining(!isTraining)}
                className={`px-4 md:px-6 py-2 md:py-3 rounded-2xl font-semibold text-white transition-all shadow-lg text-sm md:text-base ${
                  isTraining ? 'bg-gradient-to-r from-red-500 to-pink-600 hover:from-red-600 hover:to-pink-700' : 'bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700'
                }`}>
                {isTraining ? 'åœæ­¢è®­ç»ƒ' : 'å¼€å§‹è®­ç»ƒ'}
              </button>
            </div>
          </div>

          {/* è®¾ç½®é¢æ¿ */}
          {showSettings && (
            <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-start justify-center z-50 overflow-y-auto p-4"
              onClick={(e) => { if (e.target === e.currentTarget) setShowSettings(false); }}>
              <div className="bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl shadow-2xl max-w-lg w-full my-8 border border-white/10">
                <div className="p-6 border-b border-white/10 flex justify-between items-center">
                  <h2 className="text-2xl font-bold text-white">âš™ï¸ è®­ç»ƒè®¾ç½®</h2>
                  <button onClick={() => setShowSettings(false)} className="p-2 hover:bg-white/10 rounded-xl transition-colors">
                    <svg className="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
                
                <div className="p-6 space-y-6 max-h-[70vh] overflow-y-auto">
                  <div className="bg-blue-500/20 border border-blue-400/30 p-4 rounded-xl">
                    <p className="text-sm text-blue-100">
                      <strong className="text-blue-200">è®­ç»ƒåŸç†:</strong> é€šè¿‡è°ƒèŠ‚å­—ä½“å¤§å°æ¨¡æ‹Ÿè¿œè¿‘è·ç¦»å˜åŒ–,é”»ç‚¼çœ¼éƒ¨ç«çŠ¶è‚Œçš„è°ƒèŠ‚èƒ½åŠ›ã€‚
                    </p>
                  </div>

                  <div>
                    <label className="block text-sm font-semibold text-blue-200 mb-3">
                      è¿œå¤„å­—ä½“å¤§å°: <span className="text-white text-lg">{settings.farSize || 5}px</span>
                    </label>
                    <input type="range" min="1" max="100" step="1" value={settings.farSize || 5}
                      onChange={(e) => setSettings({...settings, farSize: Number(e.target.value)})} className="w-full" />
                  </div>

                  <div>
                    <label className="block text-sm font-semibold text-blue-200 mb-3">
                      è¿‘å¤„å­—ä½“å¤§å°: <span className="text-white text-lg">{settings.nearSize || 200}px</span>
                    </label>
                    <input type="range" min="100" max="300" step="5" value={settings.nearSize || 200}
                      onChange={(e) => setSettings({...settings, nearSize: Number(e.target.value)})} className="w-full" />
                  </div>

                  <div>
                    <label className="block text-sm font-semibold text-blue-200 mb-3">
                      ç§»åŠ¨é€Ÿåº¦: <span className="text-white text-lg">{settings.speed.toFixed(1)}</span>
                    </label>
                    <input type="range" min="0.1" max="5.0" step="0.1" value={settings.speed}
                      onChange={(e) => setSettings({...settings, speed: Number(e.target.value)})} className="w-full" />
                  </div>

                  <div className="grid grid-cols-2 gap-4">
                    <div>
                      <label className="block text-sm font-semibold text-blue-200 mb-3">
                        è¿‘å¤„åœç•™: <span className="text-white">{settings.pauseNear}ç§’</span>
                      </label>
                      <input type="range" min="0.5" max="5" step="0.5" value={settings.pauseNear}
                        onChange={(e) => setSettings({...settings, pauseNear: Number(e.target.value)})} className="w-full" />
                    </div>
                    <div>
                      <label className="block text-sm font-semibold text-blue-200 mb-3">
                        è¿œå¤„åœç•™: <span className="text-white">{settings.pauseFar}ç§’</span>
                      </label>
                      <input type="range" min="0.5" max="5" step="0.5" value={settings.pauseFar}
                        onChange={(e) => setSettings({...settings, pauseFar: Number(e.target.value)})} className="w-full" />
                    </div>
                  </div>

                  <div>
                    <label className="block text-sm font-semibold text-blue-200 mb-3">
                      è®­ç»ƒæ—¶é•¿: <span className="text-white text-lg">{settings.trainingDuration}åˆ†é’Ÿ</span>
                    </label>
                    <input type="range" min="1" max="30" value={settings.trainingDuration}
                      onChange={(e) => setSettings({...settings, trainingDuration: Number(e.target.value)})} className="w-full" />
                  </div>

                  {mode === 'ball' && (
                    <div>
                      <label className="block text-sm font-semibold text-blue-200 mb-3">å°çƒé¢œè‰²</label>
                      <div className="grid grid-cols-4 gap-3">
                        {[
                          {name: 'é»‘', color: '#000000'}, {name: 'ç™½', color: '#FFFFFF'},
                          {name: 'çº¢', color: '#F44336'}, {name: 'é»„', color: '#FFEB3B'},
                          {name: 'è“', color: '#2196F3'}, {name: 'ç»¿', color: '#4CAF50'},
                          {name: 'ç²‰', color: '#E91E63'}, {name: 'ç´«', color: '#9C27B0'}
                        ].map(item => (
                          <button key={item.color} onClick={() => setSettings({...settings, ballColor: item.color})}
                            className={`h-16 rounded-xl border-4 transition-all ${
                              settings.ballColor === item.color ? 'border-white scale-105' : 'border-white/30'
                            }`} style={{backgroundColor: item.color}}>
                            <span className={`text-xs font-semibold ${
                              item.color === '#FFFFFF' || item.color === '#FFEB3B' ? 'text-gray-700' : 'text-white'
                            }`}>{item.name}</span>
                          </button>
                        ))}
                      </div>
                    </div>
                  )}

                  {mode === 'image' && (
                    <div>
                      <label className="block text-sm font-semibold text-blue-200 mb-2">è‡ªå®šä¹‰è®­ç»ƒå›¾ç‰‡(å¯é€‰)</label>
                      <input type="file" accept="image/*" onChange={handleImageUpload} className="w-full text-sm text-white file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-500 file:text-white hover:file:bg-blue-600" />
                      {uploadedImage && (
                        <div className="mt-3">
                          <img src={uploadedImage} alt="é¢„è§ˆ" className="w-full h-32 object-cover rounded-xl" />
                          <button onClick={() => setUploadedImage(null)} className="mt-2 text-sm text-red-400 hover:text-red-300">
                            ç§»é™¤å›¾ç‰‡,æ¢å¤Eå­—è§†åŠ›è¡¨
                          </button>
                        </div>
                      )}
                    </div>
                  )}

                  <div className="bg-amber-500/20 border border-amber-400/30 p-4 rounded-xl">
                    <p className="text-sm text-amber-100">
                      <strong className="text-amber-200">ğŸ’¡ å»ºè®®:</strong> æ¯æ¬¡è®­ç»ƒ10-15åˆ†é’Ÿ,æ¯å¤©2-3æ¬¡ã€‚
                    </p>
                  </div>
                </div>

                <div className="p-6 border-t border-white/10">
                  <button onClick={() => setShowSettings(false)}
                    className="w-full py-4 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-xl font-bold hover:from-blue-600 hover:to-indigo-700 transition-all">
                    âœ“ ä¿å­˜è®¾ç½®
                  </button>
                </div>
              </div>
            </div>
          )}

          {/* è®­ç»ƒå®Œæˆæç¤º */}
          {showCompletionModal && (
            <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4">
              <div className="bg-gradient-to-br from-green-600 to-emerald-700 rounded-3xl shadow-2xl max-w-md w-full p-8 text-center border-4 border-white/30">
                <div className="text-6xl mb-4">ğŸ‰</div>
                <h2 className="text-3xl font-bold text-white mb-4">è®­ç»ƒå®Œæˆ!</h2>
                <p className="text-white/90 text-lg mb-6">æ­å–œä½ å®Œæˆäº† {settings.trainingDuration} åˆ†é’Ÿçš„è§†åŠ›è®­ç»ƒ!</p>
                <button onClick={() => setShowCompletionModal(false)}
                  className="w-full py-4 bg-white text-green-600 rounded-xl font-bold hover:bg-green-50 transition-colors">
                  å¤ªæ£’äº†!
                </button>
              </div>
            </div>
          )}

          {/* è§†é¢‘æ’­æ”¾å™¨ */}
          {showVideoModal && (
            <div className="fixed inset-0 bg-black/90 backdrop-blur-sm flex items-center justify-center z-50 p-4"
              onClick={(e) => { if (e.target === e.currentTarget) setShowVideoModal(false); }}>
              <div className="bg-gradient-to-br from-slate-800 to-slate-900 rounded-3xl shadow-2xl max-w-4xl w-full border border-white/10 overflow-hidden">
                <div className="p-4 border-b border-white/10 flex justify-between items-center">
                  <h2 className="text-xl font-bold text-white">ğŸ¥ è§†åŠ›è®­ç»ƒè§†é¢‘æ•™ç¨‹</h2>
                  <button onClick={() => setShowVideoModal(false)} className="p-2 hover:bg-white/10 rounded-xl transition-colors">
                    <svg className="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>
                
                <div className="p-4 md:p-6">
                  {videoError ? (
                    <div className="bg-gradient-to-br from-red-500/20 to-orange-500/20 border border-red-400/30 rounded-xl p-8 text-center">
                      <div className="text-6xl mb-4">âš ï¸</div>
                      <h3 className="text-white text-xl font-bold mb-3">è§†é¢‘åŠ è½½å¤±è´¥</h3>
                      <p className="text-white/80 mb-4">è¯·æ£€æŸ¥è§†é¢‘æ–‡ä»¶æ˜¯å¦å·²æ­£ç¡®ä¸Šä¼ åˆ°ä»¥ä¸‹è·¯å¾„:</p>
                      <code className="text-blue-300 bg-black/30 px-4 py-2 rounded-lg block mb-4">
                        /public/videos/training-video.mp4
                      </code>
                      <button 
                        onClick={() => setVideoError(false)}
                        className="mt-4 px-6 py-2 bg-white/20 hover:bg-white/30 rounded-lg text-white transition-colors">
                        é‡æ–°å°è¯•
                      </button>
                    </div>
                  ) : (
                    <>
                      <video
                        ref={videoRef}
                        className="w-full rounded-xl"
                        controls
                        controlsList="nodownload"
                        playsInline
                        preload="metadata"
                        onError={handleVideoError}
                        style={{maxHeight: '60vh'}}>
                        <source src="/public/videos/training-video.mp4" type="video/mp4" />
                        æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒè§†é¢‘æ’­æ”¾,è¯·ä½¿ç”¨æœ€æ–°ç‰ˆChromeæˆ–Safariæµè§ˆå™¨ã€‚
                      </video>
                      
                      <div className="mt-4 p-4 bg-blue-500/20 border border-blue-400/30 rounded-xl">
                        <h3 className="text-white font-semibold mb-2 flex items-center gap-2">
                          <span>ğŸ“Œ</span>
                          <span>è®­ç»ƒè¦ç‚¹:</span>
                        </h3>
                        <ul className="text-blue-100 text-sm space-y-2">
                          <li className="flex items-start gap-2">
                            <span className="text-blue-300 mt-0.5">â€¢</span>
                            <span>ä¿æŒæ­£ç¡®åå§¿,è·ç¦»å±å¹•çº¦50cm</span>
                          </li>
                          <li className="flex items-start gap-2">
                            <span className="text-blue-300 mt-0.5">â€¢</span>
                            <span>æ¯æ¬¡è®­ç»ƒ10-15åˆ†é’Ÿ</span>
                          </li>
                          <li className="flex items-start gap-2">
                            <span className="text-blue-300 mt-0.5">â€¢</span>
                            <span>è·Ÿéšè§†é¢‘æŒ‡å¯¼è¿›è¡Œçœ¼çƒè¿åŠ¨</span>
                          </li>
                          <li className="flex items-start gap-2">
                            <span className="text-blue-300 mt-0.5">â€¢</span>
                            <span>è®­ç»ƒåé—­ç›®ä¼‘æ¯2-3åˆ†é’Ÿ</span>
                          </li>
                        </ul>
                      </div>

                      <div className="mt-3 p-3 bg-white/5 rounded-lg text-center">
                        <p className="text-white/60 text-xs">
                          ğŸ’¡ æç¤º: ç‚¹å‡»è§†é¢‘å¯ä»¥æ’­æ”¾/æš‚åœ â€¢ åŒå‡»å¯ä»¥å…¨å±è§‚çœ‹
                        </p>
                      </div>
                    </>
                  )}
                </div>
              </div>
            </div>
          )}
        </div>
      );
    }

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<VisionTrainingApp />);
  </script>

  <!-- Service Workeræ³¨å†Œ -->

  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/service-worker.js')
          .then(registration => {
            console.log('âœ… Service Worker æ³¨å†ŒæˆåŠŸ');
          })
          .catch(error => {
            console.log('â„¹ï¸ Service Worker æ³¨å†Œå¤±è´¥:', error);
          });
      });
    }
  </script>

</body>
</html>
